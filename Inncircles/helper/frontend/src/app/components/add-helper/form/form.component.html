<form [formGroup]="formGroup">
  <div>
    <label *ngIf="!imagePreviewUrl" for="imageInput"
    class="imageUpload" >
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z"/>
        <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
      </svg>
    </label>
    <label for="imageInput">

      <img *ngIf="imagePreviewUrl" class="profileImg" [src]="imagePreviewUrl" alt="profile Image">
    </label>
    <span style="margin: auto;">{{imagePreviewUrl? "update": "upload"}} Image</span>
    <input type="file" id="imageInput" accept="image/*" (change)="onFileSelected($event, 'image')"  style="display: none;"/>
  </div>
  <div>
    <label for="service">Type of service</label>
    <select id="service" formControlName="TypeOfService">
      <option value="">Select service type</option>
      <option value="Maid">Maid</option>
      <option value="cook">Cook</option>
      <option value="driver">Driver</option>
      <option value="gardener">Gardener</option>
      <option value="nurse">Nurse</option>
      <option value="babysitter">Babysitter</option>
      <option value="painter">Painter</option>
    </select>
    <div class="error-message" *ngIf="formGroup.get('TypeOfService')?.invalid && formGroup.get('TypeOfService')?.touched">
      Type of service is required
    </div>
  </div>
  <div>
    <label for="organization">Organization</label>
    <select id="organization" formControlName="Orgaization">
      <option value="">Select organization</option>
      <option value="asbl">ASBL</option>
      <option value="spring-helpers">Spring Helpers</option>
    </select>
    <div class="error-message" *ngIf="formGroup.get('Orgaization')?.invalid && formGroup.get('Orgaization')?.touched">
      Organization is required
    </div>
  </div>
  <div>
    <label for="name">Name</label>
    <input type="text" id="name" formControlName="Name" placeholder="Enter name" />
    <div class="error-message" *ngIf="formGroup.get('Name')?.invalid && formGroup.get('Name')?.touched">
      <div *ngIf="formGroup.get('Name')?.errors?.['required']">Name is required</div>
      <div *ngIf="formGroup.get('Name')?.errors?.['minlength']">Name must be at least 3 characters</div>
      <div *ngIf="formGroup.get('Name')?.errors?.['maxlength']">Name cannot exceed 50 characters</div>
    </div>
  </div>
  <div class="languages-group">
    <label for="languages">Languages</label>
    <div class="custom-multi-select">
      <div class="select-header" (click)="toggleLanguageDropdown()" [class.open]="isLanguageDropdownOpen">
        <span class="selected-text">{{ getSelectedLanguagesText() }}</span>
      </div>
      <div class="dropdown-options" *ngIf="isLanguageDropdownOpen">
        <label class="option-item">
          <input type="checkbox" value="english" (change)="onLanguageChange($event)" [checked]="isLanguageSelected('english')">
          <span>English</span>
        </label>
        <label class="option-item">
          <input type="checkbox" value="telugu" (change)="onLanguageChange($event)" [checked]="isLanguageSelected('telugu')">
          <span>Telugu</span>
        </label>
        <label class="option-item">
          <input type="checkbox" value="hindi" (change)="onLanguageChange($event)" [checked]="isLanguageSelected('hindi')">
          <span>Hindi</span>
        </label>
      </div>
    </div>
    <div class="error-message" *ngIf="formGroup.get('Languages')?.invalid && formGroup.get('Languages')?.touched">
      Language is required
    </div>
  </div>
  <div class="gender-group">
    <label>Gender</label>
    <div class="radio-options">
      <div>
        <input type="radio" id="male" formControlName="Gender" value="male" />
        <label for="male">Male</label>
      </div>
      <div>
        <input type="radio" id="female" formControlName="Gender" value="female" />
        <label for="female">Female</label>
      </div>
      <div>
        <input type="radio" id="other" formControlName="Gender" value="other" />
        <label for="other">Other</label>
      </div>
    </div>
    <div class="error-message" *ngIf="formGroup.get('Gender')?.invalid && formGroup.get('Gender')?.touched">
      Gender is required
    </div>
  </div>
  <div>
    <label for="phone">Phone</label>
    <input type="tel" id="phone" formControlName="Phone" placeholder="Enter phone number" />
    <div class="error-message" *ngIf="formGroup.get('Phone')?.invalid && formGroup.get('Phone')?.touched">
      <div *ngIf="formGroup.get('Phone')?.errors?.['required']">Phone number is required</div>
      <div *ngIf="formGroup.get('Phone')?.errors?.['pattern']">Please enter a valid phone number</div>
    </div>
  </div>
  <div>
    <label for="email">Email</label>
    <input type="email" id="email" formControlName="Email" placeholder="Enter email address" />
    <div class="error-message" *ngIf="formGroup.get('Email')?.invalid && formGroup.get('Email')?.touched">
      <div *ngIf="formGroup.get('Email')?.errors?.['required']">Email is required</div>
      <div *ngIf="formGroup.get('Email')?.errors?.['email']">Please enter a valid email address</div>
    </div>
  </div>
  <div>
    <label for="vehicle">Choose vehicle type</label>
    <select id="vehicle" formControlName="VehicleType">
      <option value="">Select vehicle type</option>
      <option value="car">Car</option>
      <option value="bike">Bike</option>
      <option value="scooter">Scooter</option>
      <option value="none">None</option>
    </select>
    <div class="error-message" *ngIf="formGroup.get('VehicleType')?.invalid && formGroup.get('VehicleType')?.touched">
      Vehicle type is required
    </div>
  </div>
  <div>
    <!-- <label for="kyc">KYC Document</label> -->
    <label *ngIf="!kycPreviewUrl" for="kyc"
    class="imageUpload" >
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-arrow-up" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z"/>
        <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
      </svg>
      <!-- <span>File upload</span> -->
    </label>

    <mat-icon *ngIf="kycPreviewUrl" class="kyc-description-icon">description</mat-icon>

    <p style="margin: auto;">upload KYC</p>
    <input type="file" id="kyc" (change)="onFileSelected($event, 'pdf')" accept=".pdf" style="display: none;"/>

    <div class="error-message" *ngIf="formGroup.get('pdf')?.invalid && formGroup.get('pdf')?.touched">
      KYC document is required
    </div>
  </div>
  <div class="button-container">
    <button (click)="handleUpdate()" type="button" class="update-button" [disabled]="!formGroup.valid" *ngIf="editMode">
      Save
    </button>
    <button type="button" class="next-button" (click)="onNext()" *ngIf="!editMode">
    Next
    <img src="assets/next.png" alt="Next">
    </button>
  </div>
</form>
